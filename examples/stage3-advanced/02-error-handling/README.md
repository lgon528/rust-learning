# 示例 2：高级错误处理

本示例旨在演示 Rust 的高级错误处理技术，重点介绍如何创建自定义错误类型、使用 `?` 运算符以及如何让 `main` 函数返回 `Result`。

## 核心概念

### 1. 自定义错误类型

在 Rust 中，你可以创建自己的错误类型，以便更精确地表达程序中可能发生的错误。这通常通过定义一个枚举（`enum`）来完成，每个变体代表一种不同的错误情况。

- **`Display` Trait**：为你的错误类型实现 `Display` trait，可以提供用户友好的错误信息。
- **`Error` Trait**：实现 `Error` trait 可以让你的错误类型与其他库和工具更好地集成，并支持错误链（error chaining）。

### 2. `?` 运算符

`?` 运算符是一种用于简化错误传播的语法糖。当一个函数返回 `Result` 时，你可以在调用该函数后使用 `?` 运算符。如果结果是 `Ok`，它将解开 `Ok` 并返回值；如果结果是 `Err`，它将立即从当前函数返回该错误。

### 3. `main` 函数返回 `Result`

让 `main` 函数返回 `Result` 是一种常见的模式，它允许你将错误传播到程序的顶层，而不是在 `main` 函数中处理它们。这使得代码更加简洁，并允许你使用 `?` 运算符。

## 如何运行

你可以使用以下命令来运行本示例：

```bash
cargo run -p stage3-error-handling-demo
```

该命令将编译并执行 `src/main.rs` 文件，你将在终端看到关于高级错误处理的演示输出。