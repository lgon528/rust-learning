# Comparisons Demo

本项目演示了 Rust 中的比较操作，涵盖了基本比较、自定义类型比较、排序算法和高级比较技术。

## 项目结构

```
comparisons-demo/
├── src/
│   └── lib.rs          # 主要的比较操作示例
├── Cargo.toml          # 项目配置
└── README.md           # 项目说明
```

## 涵盖的比较功能

### 1. 基本比较 (`basic` 模块)
- **数字比较**: 演示基本的数值比较操作
- **字符串比较**: 包括大小写敏感和不敏感的字符串比较
- **查找最值**: `find_max` 和 `find_min` 函数
- **排序检查**: `is_sorted` 函数检查数组是否已排序

### 2. 自定义类型比较 (`custom` 模块)
- **Person 结构体**: 按年龄进行比较的自定义类型
- **Product 结构体**: 按价格进行比较的商品类型
- **自定义比较函数**: `compare_by_name` 和 `compare_by_price`
- **Trait 实现**: `PartialEq`, `Eq`, `PartialOrd`, `Ord` 的完整实现

### 3. 排序和搜索算法 (`algorithms` 模块)
- **冒泡排序**: `bubble_sort` 基础排序算法
- **选择排序**: `selection_sort` 另一种基础排序算法
- **二分搜索**: `binary_search` 在已排序数组中快速查找
- **自定义排序**: `sort_by` 使用自定义比较函数排序
- **第K小元素**: `find_kth_smallest` 查找第K小的元素

### 4. 高级比较 (`advanced` 模块)
- **Student 结构体**: 多字段比较（先按成绩，再按年龄）
- **Top-N 算法**: `top_n_largest` 和 `top_n_smallest` 函数
- **字符串算法**: `are_anagrams` 检查两个字符串是否为字母异位词

## 使用方法

### 运行测试
```bash
cargo test -p comparisons-demo
```

### 运行文档测试
```bash
cargo test -p comparisons-demo --doc
```

### 查看文档
```bash
cargo doc -p comparisons-demo --open
```

## 核心概念

### 比较 Trait 层次结构
1. **PartialEq**: 部分相等性，支持 `==` 和 `!=`
2. **Eq**: 完全相等性，要求满足自反性
3. **PartialOrd**: 部分排序，支持 `<`, `<=`, `>`, `>=`
4. **Ord**: 全排序，要求任意两个值都可比较

### 实现要点
- **一致性**: `PartialEq` 和 `Ord` 的实现必须保持一致
- **传递性**: 如果 a < b 且 b < c，则 a < c
- **反对称性**: 如果 a <= b 且 b <= a，则 a == b

## 学习要点

1. **基本比较操作**: 掌握 Rust 中的比较运算符使用
2. **Trait 实现**: 学习如何为自定义类型实现比较 trait
3. **排序算法**: 理解基本排序算法的实现
4. **泛型编程**: 使用泛型编写可复用的比较函数
5. **性能考虑**: 了解不同算法的时间复杂度

## 相关章节

本项目对应《Rust 程序设计语言》第五章的内容，特别是：
- 比较运算符的使用
- 自定义类型的比较实现
- 标准库中的排序和搜索功能

## 测试信息

- **单元测试**: 11个测试用例
- **文档测试**: 19个文档示例
- **覆盖范围**: 所有公共函数和方法都有相应的测试

## 扩展练习

1. **实现更多排序算法**: 快速排序、归并排序、堆排序
2. **优化搜索算法**: 实现插值搜索、指数搜索
3. **多字段排序**: 为 Product 添加多个排序标准
4. **性能基准测试**: 使用 criterion.rs 比较不同算法性能
5. **自定义比较器**: 实现可配置的比较策略

## 重要注意事项

- 实现比较 trait 时要确保数学性质的正确性
- 浮点数比较需要特别注意 NaN 的处理
- 大型数据集排序时考虑使用标准库的 `sort()` 方法
- 自定义比较逻辑应该保持一致性和可预测性