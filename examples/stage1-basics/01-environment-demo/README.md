# Environment Demo

本项目演示了 Rust 开发环境的信息获取和验证功能，涵盖了系统信息检查、环境变量操作、编译时信息获取等内容。

## 项目结构

```
environment-demo/
├── src/
│   └── lib.rs          # 主要的环境信息示例
├── Cargo.toml          # 项目配置
└── README.md           # 项目说明
```

## 涵盖的环境功能

### 1. 基本环境信息 (`basic` 模块)
- **Rust 版本检查**: `get_rust_version()` 获取 Rust 版本信息
- **操作系统检测**: `get_os_info()` 识别当前操作系统
- **架构检测**: `get_target_arch()` 获取目标架构信息
- **构建类型检查**: `is_debug_build()` 检查是否为调试构建

### 2. 环境变量操作 (`env_vars` 模块)
- **环境变量获取**: `get_env_var()` 获取指定环境变量值
- **当前目录**: `get_current_dir()` 获取当前工作目录
- **所有环境变量**: `get_all_env_vars()` 获取所有环境变量列表
- **环境变量检查**: `env_var_exists()` 检查环境变量是否存在

### 3. 系统信息结构体 (`SystemInfo`)
- **综合信息**: 集成所有系统和环境信息
- **环境就绪检查**: `is_environment_ready()` 验证开发环境是否就绪
- **格式化显示**: 实现 `Display` trait 提供友好的信息展示
- **默认构造**: 实现 `Default` trait 提供便捷的实例创建

### 4. 编译时信息 (`compile_time` 模块)
- **编译时间**: `get_compile_time()` 获取编译时间信息
- **包信息**: `get_package_name()`, `get_package_version()`, `get_package_authors()`
- **元数据访问**: 使用 `env!` 宏访问编译时元数据

### 5. 平台特性检查 (`features` 模块)
- **指针宽度**: `has_64bit_pointers()` 检查是否支持 64 位指针
- **系统类型**: `is_unix()`, `is_windows()` 检查系统类型
- **特性摘要**: `get_platform_features()` 获取平台特性列表

## 使用方法

### 运行测试
```bash
cargo test -p environment-demo
```

### 运行文档测试
```bash
cargo test -p environment-demo --doc
```

### 查看文档
```bash
cargo doc -p environment-demo --open
```

### 基本使用示例
```rust
use environment_demo::SystemInfo;

fn main() {
    // 创建系统信息实例
    let info = SystemInfo::new();
    
    // 显示完整的环境信息
    println!("{}", info);
    
    // 检查环境是否就绪
    if info.is_environment_ready() {
        println!("✅ Rust 开发环境已就绪！");
    } else {
        println!("❌ 环境配置存在问题");
    }
}
```

## 核心概念

### 编译时 vs 运行时信息
1. **编译时信息**: 使用 `env!` 和 `cfg!` 宏在编译时确定
2. **运行时信息**: 使用 `std::env` 模块在运行时获取
3. **条件编译**: 使用 `cfg!` 宏进行平台特定的代码编译

### 环境变量处理
- **安全获取**: 使用 `Result` 和 `Option` 处理可能失败的操作
- **跨平台兼容**: 考虑不同操作系统的环境变量差异
- **错误处理**: 优雅处理环境变量不存在的情况

### 系统信息聚合
- **结构化数据**: 使用结构体组织相关信息
- **trait 实现**: 提供 `Display`, `Debug`, `Default` 等常用 trait
- **验证逻辑**: 实现环境就绪状态的检查逻辑

## 学习要点

1. **编译时宏**: 掌握 `env!`, `cfg!`, `option_env!` 等宏的使用
2. **环境交互**: 学习如何与操作系统环境进行交互
3. **错误处理**: 理解 `Result` 和 `Option` 在系统编程中的应用
4. **条件编译**: 学习如何编写跨平台的 Rust 代码
5. **trait 实现**: 为自定义类型实现标准 trait

## 相关章节

本项目对应《Rust 程序设计语言》第一章的内容，特别是：
- Rust 开发环境的搭建和验证
- 工具链的安装和配置
- 跨平台开发的考虑

## 测试信息

- **单元测试**: 12个测试用例
- **文档测试**: 18个文档示例
- **覆盖范围**: 所有公共函数和方法都有相应的测试
- **平台测试**: 在不同操作系统和架构上验证功能

## 扩展练习

1. **添加更多系统信息**: CPU 信息、内存信息、磁盘空间等
2. **网络环境检查**: 检查网络连接、代理设置等
3. **开发工具检测**: 检查 Git、编辑器等开发工具的安装状态
4. **性能基准**: 添加简单的性能测试来评估系统性能
5. **配置文件支持**: 支持从配置文件读取环境设置
6. **环境报告生成**: 生成详细的环境报告文件

## 重要注意事项

- 环境变量的获取可能失败，需要适当的错误处理
- 不同操作系统的环境变量名称和路径格式可能不同
- 编译时信息在编译后就固定了，不会在运行时改变
- 某些系统信息可能需要特殊权限才能获取
- 跨平台代码需要考虑不同系统的差异性