# 示例 2：借用和生命周期

本示例旨在演示 Rust 的借用（Borrowing）和生命周期（Lifetimes）核心概念。

## 核心概念

### 1. 借用（Borrowing）

Rust 的借用机制允许你在不获取所有权的情况下访问数据。借用分为两种类型：

- **不可变借用（Immutable Borrow）**：
  - 使用 `&T` 创建，允许你读取数据，但不能修改它。
  - 在同一作用域内，可以同时存在多个不可变借用。

- **可变借用（Mutable Borrow）**：
  - 使用 `&mut T` 创建，允许你读取和修改数据。
  - 在同一作用域内，只能存在一个可变借用。

### 2. 借用规则

Rust 强制执行以下借用规则，以确保内存安全：

- **规则 1**：在任何给定时间，你要么只能有一个可变引用，要么只能有任意数量的不可变引用。
- **规则 2**：引用必须始终有效。

这些规则在编译时由借用检查器（Borrow Checker）强制执行，从而在编译阶段就防止了数据竞争。

### 3. 生命周期（Lifetimes）

生命周期是 Rust 用来确保引用有效的一种机制。它是一个编译时概念，用于描述引用在哪个作用域内是有效的。

- **生命周期注解**：通过 `'a` 这样的语法来标记，告诉编译器引用的有效范围。
- **NLL（Non-Lexical Lifetimes）**：非词法生命周期是 Rust 1.31 引入的一项改进，它允许借用检查器更智能地分析代码，从而在不牺牲安全性的前提下，接受更多 ранее被拒绝的有效代码。

## 如何运行

你可以使用以下命令来运行本示例：

```bash
cargo run -p borrowing-and-lifetimes-demo
```

该命令将编译并执行 `src/main.rs` 文件，你将在终端看到关于借用和生命周期的演示输出。